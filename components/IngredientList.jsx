import { useContext, useState } from "react";
import { UserContext } from "../contexts/userContext";
import { addIngredientToUser } from "../lib/firebase";
import Modal from "./Modal";
import toast from "react-simple-toasts";
import { toastConfig } from "react-simple-toasts";

toastConfig({
  time: 1000,
  position: "bottom-center",
});

export default function IngredientList({ ingredient }) {
  const text = ingredient.text;
  const { user } = useContext(UserContext);
  const [showModal, setShowModal] = useState(false);

  const handleAddIngredient = async () => {
    if (user) {
      await addIngredientToUser(user, text);
      toast("Ingredient added to your list!");
    } else {
      setShowModal(true);
    }
  };

  return (
    <li className="flex items-start justify-between gap-x-2">
      {showModal && <Modal onClose={() => setShowModal(false)} />}
      <div className="flex">
        {/* <svg
          className="mr-4 h-6 w-6 shrink-0"
          width="30"
          height="30"
          viewBox="0 0 18 14"
          fill="none"
        >
          <path
            d="M17.5 1.41L5.5 13.41L0 7.91L1.41 6.5L5.5 10.58L16.09 0L17.5 1.41Z"
            fill="#0FA958"
          />
        </svg> */}
        <svg
          className="mr-4 shrink-0"
          width="30"
          height="30"
          viewBox="0 0 24 24"
          fill="none"
          xmlns="http://www.w3.org/2000/svg"
        >
          <path
            d="M4.125 13.125L9.375 18.375L19.875 7.125"
            stroke="#0FA958"
            stroke-width="1.5"
            stroke-linecap="round"
            stroke-linejoin="round"
          />
        </svg>

        <p className="text-lg font-normal">{text}</p>
      </div>
      <button className="px-4 py-1" onClick={handleAddIngredient}>
        <svg
          width="25"
          height="25"
          viewBox="0 0 31 30"
          fill="none"
          className="hover:opacity-80"
        >
          <mask id="path-1-inside-1_106_50" fill="white">
            <path
              fill-rule="evenodd"
              clip-rule="evenodd"
              d="M15.5 30C23.7843 30 30.5 23.2843 30.5 15C30.5 6.71573 23.7843 0 15.5 0C7.21573 0 0.5 6.71573 0.5 15C0.5 23.2843 7.21573 30 15.5 30ZM16.7407 16.2406H22.9437C23.2728 16.2406 23.5883 16.1099 23.821 15.8772C24.0536 15.6446 24.1843 15.329 24.1843 15C24.1843 14.671 24.0536 14.3554 23.821 14.1228C23.5883 13.8901 23.2728 13.7594 22.9437 13.7594H16.7407V7.5564C16.7407 7.22737 16.61 6.91182 16.3774 6.67916C16.1447 6.4465 15.8292 6.3158 15.5001 6.3158C15.1711 6.3158 14.8555 6.4465 14.6229 6.67916C14.3902 6.91182 14.2595 7.22737 14.2595 7.5564V13.7594H8.05652C7.72749 13.7594 7.41194 13.8901 7.17928 14.1228C6.94662 14.3554 6.81592 14.671 6.81592 15C6.81592 15.329 6.94662 15.6446 7.17928 15.8772C7.41194 16.1099 7.72749 16.2406 8.05652 16.2406H14.2595V22.4436C14.2595 22.7726 14.3902 23.0882 14.6229 23.3209C14.8555 23.5535 15.1711 23.6842 15.5001 23.6842C15.8292 23.6842 16.1447 23.5535 16.3774 23.3209C16.61 23.0882 16.7407 22.7726 16.7407 22.4436V16.2406Z"
            />
          </mask>
          <path
            fill-rule="evenodd"
            clip-rule="evenodd"
            d="M15.5 30C23.7843 30 30.5 23.2843 30.5 15C30.5 6.71573 23.7843 0 15.5 0C7.21573 0 0.5 6.71573 0.5 15C0.5 23.2843 7.21573 30 15.5 30ZM16.7407 16.2406H22.9437C23.2728 16.2406 23.5883 16.1099 23.821 15.8772C24.0536 15.6446 24.1843 15.329 24.1843 15C24.1843 14.671 24.0536 14.3554 23.821 14.1228C23.5883 13.8901 23.2728 13.7594 22.9437 13.7594H16.7407V7.5564C16.7407 7.22737 16.61 6.91182 16.3774 6.67916C16.1447 6.4465 15.8292 6.3158 15.5001 6.3158C15.1711 6.3158 14.8555 6.4465 14.6229 6.67916C14.3902 6.91182 14.2595 7.22737 14.2595 7.5564V13.7594H8.05652C7.72749 13.7594 7.41194 13.8901 7.17928 14.1228C6.94662 14.3554 6.81592 14.671 6.81592 15C6.81592 15.329 6.94662 15.6446 7.17928 15.8772C7.41194 16.1099 7.72749 16.2406 8.05652 16.2406H14.2595V22.4436C14.2595 22.7726 14.3902 23.0882 14.6229 23.3209C14.8555 23.5535 15.1711 23.6842 15.5001 23.6842C15.8292 23.6842 16.1447 23.5535 16.3774 23.3209C16.61 23.0882 16.7407 22.7726 16.7407 22.4436V16.2406Z"
            fill="#F3A1A1"
          />
          {/* <path
            d="M16.7407 16.2406V15.2406H15.7407V16.2406H16.7407ZM23.821 15.8772L23.1139 15.1701L23.1139 15.1701L23.821 15.8772ZM23.821 14.1228L23.1139 14.8299L23.1139 14.8299L23.821 14.1228ZM16.7407 13.7594H15.7407V14.7594H16.7407V13.7594ZM16.3774 6.67916L17.0845 5.97205L17.0845 5.97205L16.3774 6.67916ZM14.6229 6.67916L15.33 7.38627L15.33 7.38627L14.6229 6.67916ZM14.2595 13.7594V14.7594H15.2595V13.7594H14.2595ZM7.17928 14.1228L7.88639 14.8299L7.88639 14.8299L7.17928 14.1228ZM14.2595 16.2406H15.2595V15.2406H14.2595V16.2406ZM14.6229 23.3209L15.33 22.6137L15.33 22.6137L14.6229 23.3209ZM16.3774 23.3209L15.6703 22.6137L15.6703 22.6137L16.3774 23.3209ZM29.5 15C29.5 22.732 23.232 29 15.5 29V31C24.3366 31 31.5 23.8366 31.5 15H29.5ZM15.5 1C23.232 1 29.5 7.26801 29.5 15H31.5C31.5 6.16344 24.3366 -1 15.5 -1V1ZM1.5 15C1.5 7.26801 7.76801 1 15.5 1V-1C6.66344 -1 -0.5 6.16344 -0.5 15H1.5ZM15.5 29C7.76801 29 1.5 22.732 1.5 15H-0.5C-0.5 23.8366 6.66344 31 15.5 31V29ZM22.9437 15.2406H16.7407V17.2406H22.9437V15.2406ZM23.1139 15.1701C23.0688 15.2153 23.0076 15.2406 22.9437 15.2406V17.2406C23.538 17.2406 24.1079 17.0046 24.5281 16.5843L23.1139 15.1701ZM23.1843 15C23.1843 15.0638 23.159 15.125 23.1139 15.1701L24.5281 16.5844C24.9483 16.1642 25.1843 15.5943 25.1843 15H23.1843ZM23.1139 14.8299C23.159 14.875 23.1843 14.9362 23.1843 15H25.1843C25.1843 14.4058 24.9483 13.8359 24.5281 13.4157L23.1139 14.8299ZM22.9437 14.7594C23.0076 14.7594 23.0688 14.7848 23.1139 14.8299L24.5281 13.4157C24.1079 12.9955 23.538 12.7594 22.9437 12.7594V14.7594ZM16.7407 14.7594H22.9437V12.7594H16.7407V14.7594ZM15.7407 7.5564V13.7594H17.7407V7.5564H15.7407ZM15.6703 7.38627C15.7154 7.43139 15.7407 7.49259 15.7407 7.5564H17.7407C17.7407 6.96215 17.5047 6.39225 17.0845 5.97205L15.6703 7.38627ZM15.5001 7.3158C15.5639 7.3158 15.6251 7.34114 15.6703 7.38627L17.0845 5.97205C16.6643 5.55186 16.0944 5.3158 15.5001 5.3158V7.3158ZM15.33 7.38627C15.3751 7.34115 15.4363 7.3158 15.5001 7.3158V5.3158C14.9059 5.3158 14.336 5.55186 13.9158 5.97205L15.33 7.38627ZM15.2595 7.5564C15.2595 7.49259 15.2849 7.43139 15.33 7.38627L13.9158 5.97205C13.4956 6.39225 13.2595 6.96215 13.2595 7.5564H15.2595ZM15.2595 13.7594V7.5564H13.2595V13.7594H15.2595ZM8.05652 14.7594H14.2595V12.7594H8.05652V14.7594ZM7.88639 14.8299C7.93151 14.7848 7.99271 14.7594 8.05652 14.7594V12.7594C7.46228 12.7594 6.89237 12.9955 6.47217 13.4157L7.88639 14.8299ZM7.81592 15C7.81592 14.9362 7.84127 14.875 7.88639 14.8299L6.47218 13.4157C6.05198 13.8359 5.81592 14.4058 5.81592 15H7.81592ZM7.88639 15.1701C7.84127 15.125 7.81592 15.0638 7.81592 15H5.81592C5.81592 15.5943 6.05198 16.1642 6.47217 16.5844L7.88639 15.1701ZM8.05652 15.2406C7.99271 15.2406 7.93151 15.2153 7.88639 15.1701L6.47217 16.5844C6.89237 17.0045 7.46228 17.2406 8.05652 17.2406V15.2406ZM14.2595 15.2406H8.05652V17.2406H14.2595V15.2406ZM15.2595 22.4436V16.2406H13.2595V22.4436H15.2595ZM15.33 22.6137C15.2849 22.5686 15.2595 22.5074 15.2595 22.4436H13.2595C13.2595 23.0379 13.4956 23.6078 13.9158 24.028L15.33 22.6137ZM15.5001 22.6842C15.4363 22.6842 15.3751 22.6589 15.33 22.6137L13.9158 24.028C14.336 24.4482 14.9059 24.6842 15.5001 24.6842V22.6842ZM15.6703 22.6137C15.6251 22.6589 15.5639 22.6842 15.5001 22.6842V24.6842C16.0944 24.6842 16.6643 24.4482 17.0845 24.028L15.6703 22.6137ZM15.7407 22.4436C15.7407 22.5074 15.7154 22.5686 15.6703 22.6137L17.0845 24.028C17.5047 23.6078 17.7407 23.0379 17.7407 22.4436H15.7407ZM15.7407 16.2406V22.4436H17.7407V16.2406H15.7407Z"
            mask="url(#path-1-inside-1_106_50)"
          /> */}
        </svg>
      </button>
    </li>
  );
}
